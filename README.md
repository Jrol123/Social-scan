# Social-scan

Анализ и кластеризация сообщений об организациях с различных площадок.

В примерах идёт работа с курортным центром МРИЯ.

## Статус

На данный момент проект полностью готов.

Производится доработка системы мультикластеризации

## Описание

Social Scan — система анализа пользовательских отзывов из социальных сетей и рейтинговых площадок для выявления ключевых проблем бизнеса.

Проект автоматизирует сбор отзывов (с акцентом на негативные), их семантическую классификацию с помощью LLM, тематическую кластеризацию и генерацию аналитических отчетов. Это позволяет бизнесу быстро определить болевые точки в сервисе и принять data-driven решения.

**Особенности:**
Поддержка 5+ платформ: Парсинг Google/Yandex Maps, Отзовик, Telegram, VK (с обработкой рейтинга или NLP-классификацией).

- **Гибкая разметка:**
  - Для отзывов с рейтингом: автоматическая классификация (негатив/нейтраль/позитив) на основе числовых оценок.
  - Для соцсетей: семантический анализ с моделью MBart.

- **Возможность тематической суммаризации:**
  - Разбиение отзывов по категориям (например, "Номер", "Столовая") с использованием DeepSeek.

- **Умная кластеризация:**
  - Автоподбор алгоритмов (DBSCAN, HDBSCAN и др.).
  - Объединение схожих жалоб (DeepSeek для тематического анализа).
  
- **Автоотчеты:**
  - Генерация PDF-отчетов с текстовым описанием проблемных зон.

**Для кого это:**

- **Бизнесы:** Поиск слабых мест в сервисе на основе обратной связи.

- **Аналитики:** Автоматизация рутинного анализа текстовых отзывов.

- **ML-инженеры:** Готовый пайплайн для экспериментов с NLP и кластеризацией.

## Процесс работы

Везде используется подход через `Master_*`, где работа подмодуля делится на несколько отдельных частей, которые можно одновременно использовать в мастер-обработчике.

Каждая из частей предусматривает создание обработчика и конфига к нему (к примеру, экземпляр парсера требует экземпляр его конфигурации). Такой же подход и с мастер-обработчиками.

### Парсинг

#### Процесс парсинга

Парсить можно как по-одному парсеру за раз, так и воспользовавшись мастер-парсером, который будет работать со всеми парсерами сразу.

#### Сайты с рейтингом

В этот список попадают сайты, где есть чёткая система рейтинга, числовая метрика, отвечающая за то, понравилась ли пользователю организация, или нет.

На основе рейтинга будет определено, к какому классу будет определён отзыв.

##### Список ресурсов

1. [`google maps`](src/get_info/parsers/google_maps)
2. [`yandex maps`](src/get_info/parsers/yandex_maps)
3. [`otzovik`](src/get_info/parsers/otzovik)

#### Сайты без рейтинга

Сайты, где такой метрики нет.

Класс будет определяться с помощью NLP модели.

##### Список ресурсов

1. [`telegram`](src/get_info/parsers/telegram)
2. [`vk`](src/get_info/parsers/vk)

#### Примеры работы

1. [`Одиночный parsing`](examples/01_single-parser.py)
    - Посвящён парсингу с одного парсера.
2. [`Полный parsing`](examples/01_parsing.py)
    - Посвящён парсингу сразу с нескольких источников одновременно

### Разметка

Разметка может быть как двухклассовой (0 - не-негатив, 1 - негатив)  так и трёхклассовой (0 - нейтраль, 1 - позитив, 2 - негатив).

#### Рейтинг

Ставятся рамки положительного и отрицательного класса.

Если рамки совпадают и одно из условий нестрогое - двухклассовая разметка, иначе - трёхклассовая.

#### Семантический анализ

Всё зависит от выхода nlp-модели (возможна обработка только 3 и 5 классов) и типа обработки (двух или трёх классовой)

#### Примеры работы

1. [`Обработка`](examples/02_transform.py)
    - Назначение label-ов отзывам.
2. [`Фильтрация`](examples/02a_filter.py)
    - Фильтрация по label-ам.

### Суммаризация

Суммаризация может производиться как по темам, так и в общем формате.

Под темами подразумеваются "разделы", такие как `Номер`, `Столовая`, `Мероприятия`.

- В случае использования тем, добавляется тема `Остальное`, куда попадает то, что не попало в остальные темы.

#### Примеры работы

1. [`Суммаризация`](examples/03_summarization.py)

### Кластеризация

В кластеризации производится подбор оптимального алгоритма.

Дополнительно проходит объединение схожих кластеров, и удаление ненужных.

#### Примеры работы

1. [`Кластеризация`](examples/04_clusterization.py)

### Отчёт

Отчёт генерируется в формате markdown и переводится в pdf.

#### Примеры работы

1. [`Генерация отчёта`](examples/05_report.py)

## Используемые библиотеки и модели

### Парсинг

`Selenium` — Используется для парсинга

`undetected-chromedriver` — web-driver для парсинга

`SQLAlchemy` — потенциально будет сохранение результатов в бд

### Разметка

`pandas`

`numpy`

[Mbart](https://huggingface.co/sismetanin/mbart_ru_sum_gazeta-ru-sentiment-rusentiment) — лучший компромисс между количеством токенов и качеством.

- (Имеет длину в 1024 токена, что покрывает примерно 87% отзывов с сайтов без рейтинга)
- [Процесс подбора и результаты](src/get_labels/T_model_evaluation)

### Суммаризация

Mistral - Предоставляет большое количество запросов и даёт приемлемое качество, по сравнению с более мощными LLM.

DeepSeek - Mistral не подходит для суммаризации по категориям.

### Кластеризация

DeepSeek выдаёт наиболее качественные ответы.

### Отчёт

DeepSeek — Использует markdown в ответах + высокое качество.
`md2pdf` — используется для конвертации markdown в pdf.

## Возможные улучшения

Можно кластеризировать отзывы по проблемам, указанным в суммаризации. [#102](https://github.com/Jrol123/Social-scan/issues/102)

Сохранять промежуточные результаты парсинга для продолжения в случае ошибок.

Автоподбор параметров для парсинга (частично реализовано в модуле [`get_url`](src/get_url), где подбираются локальные параметры (реализовано ещё до конфигураций)).

Сделать Мастер-Обработчик, который объединит работу всех модулей внутри себя. [#110](https://github.com/Jrol123/Social-scan/issues/110)

## Credits

[`yandex_reviews_parser`](https://github.com/useless-apple/yandex_reviews-parser) — `yandex parser` был сделан на основе этого репозитория
